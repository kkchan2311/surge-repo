[General]
loglevel = notify

compatibility-mode = 3

# â€”â€” Network test â€”â€”
proxy-test-udp = www.apple.com@64.6.64.6
internet-test-url = http://captive.apple.com
proxy-test-url = http://dns.nextdns.io/generate_204
test-timeout = 5

wifi-assist = false
all-hybrid = true

# â€”â€” MaxMind GeoIP â€”â€”
geoip-maxmind-url = https://raw.githubusercontent.com/Hackl0us/GeoIP2-CN/release/Country.mmdb
disable-geoip-db-auto-update = true

# â€”â€” IPv6 â€”
# IPv6 quality is unstable, it is recommended to turn it off
ipv6 = false // å¦‚æ— ç‰¹æ®Šéœ€æ±‚ä¸åº”å¼€å¯ IPv6ï¼Œç›®å‰ç½‘ç»œçŽ¯å¢ƒä¸‹ IPv6 åªä¼šå¸¦æ¥é—®é¢˜ã€‚
ipv6-vif = disabled

hide-vpn-icon = false

# â€”â€” Wi-Fi â€”â€”
allow-wifi-access = false
allow-hotspot-access = false

# â€”â€” API Dashboard â€”â€”
http-api = kkchan@0.0.0.0:6171
http-api-tls = true
http-api-web-dashboard = true

# â€”â€” DNS settings --
dns-server = 1.9.1.9, 119.29.29.29, 223.5.5.5, system

# Encrypted DNS: Continue to use
encrypted-dns-server = h3://223.5.5.5/dns-query
encrypted-dns-follow-outbound-mode = false
encrypted-dns-skip-cert-verification = false

use-local-host-item-for-proxy = true

# always real-ip
always-real-ip = *.lan, *.local, localhost.*.qq.com, localhost.*.weixin.qq.com, local.adguard.org, music.163.com, *.music.163.com, *.126.net, songsearch.kugou.com, trackercdn.kugou.com, y.qq.com, *.y.qq.com, streamoc.music.tc.qq.com, mobileoc.music.tc.qqmusic.qq.com, isure.stream.qqmusic.qq.com, dl.stream.qqmusic.qq.com, aqqmusic.tc.qq.com, amobile.music.tc.qq.com, *.music.migu.cn, music.migu.cn, *.whatsapp.net, *.facebook.com, *.fbcdn.net, *.fbsbx.com, *.messenger.com

exclude-simple-hostnames = true

# â€”â€” DNS hijacking (make sure to access the local DNS)â€”
hijack-dns = 8.8.8.8:53, 1.1.1.1:53, 8.8.4.4:53

show-error-page-for-reject = true

udp-priority = false

skip-proxy = localhost, *.local, 0.0.0.0/8, 10.0.0.0/8, 127.0.0.0/8, 169.254.0.0/16, 192.168.0.0/16

include-all-networks = true

# #######################################
# Strategy group part
# ######################################

[Proxy]
direct = direct

â˜ï¸CF = wireguard, section-name=F16491DD, test-url=http://1.0.0.1/generate_204

ðŸ‡ºðŸ‡¸Boardman (AWS) = vmess, v2ray.cool, 443, username=a3482e88-686a-4a58-8126-99c9df64b7bf, ws=true, ws-path=/v2ray.cool/, tls=true

ðŸ‡­ðŸ‡°HK (ACI) = trojan, trojan.com, 443, password=password

[Proxy Group]
# ä¸»ç­–ç•¥
âœˆï¸PROXY = select, direct, no-alert=0, hidden=0, include-all-proxies=0

ðŸŽ¯FINAL = select, direct, no-alert=0, hidden=0, include-all-proxies=0

ðŸ§¯Fallback = fallback, DIRECT, no-alert=0, hidden=0, include-all-proxies=0

ðŸ•¹AutoTest = url-test, DIRECT, no-alert=0, hidden=0, include-all-proxies=0

# ######################################
# Part of the rules
# ######################################
[Rule]

AND,((PROTOCOL,UDP), (DEST-PORT,443)),REJECT-NO-DROP
# â¬‡ Lan-Private
RULE-SET,https://raw.githubusercontent.com/faynode/surge-repo/main/rules/lan-private.txt,direct
# â¬‡ Direct
RULE-SET,https://raw.githubusercontent.com/faynode/surge-repo/main/rules/direct.txt,direct,no-resolve
# â¬‡ Apple
RULE-SET,https://raw.githubusercontent.com/faynode/surge-repo/main/rules/apple.txt,direct
# â¬‡ ADBlock
RULE-SET,https://raw.githubusercontent.com/faynode/surge-repo/main/rules/adblock.txt,REJECT
# â¬‡ China-list
RULE-SET,https://raw.githubusercontent.com/faynode/surge-repo/main/rules/china-list.conf,direct
# â¬‡ Proxy
RULE-SET,https://raw.githubusercontent.com/faynode/surge-repo/main/rules/proxy.txt,âœˆï¸PROXY,no-resolve
# â¬‡ Lan
RULE-SET,LAN,direct
# â¬‡ GEO
GEOIP,CN,DIRECT
GEOIP,PRIVATE,DIRECT,no-resolve
FINAL,ðŸŽ¯FINAL,dns-failed

[Host]

# ===== LAN / Local Devices =====
*.local = server:system
*.lan = server:system
home.arpa = server:system

# ===== Router Web UI =====
routerlogin.net = server:system
router.asus.com = server:system
tplogin.cn = server:system
tplinkwifi.net = server:system
tendawifi.com = server:system
miwifi.com = server:system
router.synology.com = server:system

# ===== Apple / iCloud ï¼ˆMY ï¼‰=====
*.apple.com = server:system
*.icloud.com = server:system
apple-dns.net = server:system
cdn-apple.com = server:system

# ===== Googleï¼ˆMY ï¼‰=====
*.googleapis.com = server:system
*.gstatic.com = server:system

# ===== Chinese Appsï¼ˆAvoid error analysisï¼‰=====
# douyin.com = server:system
# *.douyin.com = server:system
# music.163.com = server:system
# *.music.163.com = server:system

# ===== OpenAIï¼ˆMust be an agentï¼‰=====
*.openai.com = proxy
chatgpt.com = proxy

# ===== Social Mediaï¼ˆMY Normal speed limitï¼‰=====
*.facebook.com = proxy
*.instagram.com = proxy
*.whatsapp.net = proxy
*.tiktok.com = proxy

# ===== China Sitesï¼ˆReturning to China modeï¼‰=====

# ===== Default =====
* = server:system

[Script]

# > termius unlock
terminus-unlock = type=http-response,pattern=^https?://api\.terminus\.app/v\d+/account,requires-body=true,max-size=3145728,script-path=https://raw.githubusercontent.com/hientt53/surge/refs/heads/main/scripts/langkhach/terminus.js

# testflight
TestFlightä¸‹è½½ä¿®æ­£ = type=http-request,pattern=^https?:\/\/testflight\.apple\.com\/v\d\/accounts\/.+?\/install$,requires-body=1,max-size=0,script-path=https://gist.githubusercontent.com/NobyDa/9be418b93afc5e9c8a8f4d28ae403cf2/raw/TF_Download.js

# China TikTok to advertise
æŠ–éŸ³åŽ»å¹¿å‘Š = type=http-response,pattern=^https?:\/\/.*\.amemv\.com\/aweme\/v1\/(feed|mix\/aweme|aweme\/post|(multi\/)?aweme\/detail|follow\/feed|nearby\/feed|search\/item|general\/search\/single|hot\/search\/video\/list)\/,requires-body=1,max-size=-1,script-path=https://Choler.github.io/Surge/Script/douyin.js

# YouTubeGo to advertising
YouTubeåŽ»å¹¿å‘Š = type=http-request,pattern=^https?:\/\/.+?\.googlevideo\.com\/.+&(oad|ctier)=(?!A),script-path=https://choler.github.io/Surge/Script/YouTube.js

[WireGuard F16491DD]
private-key = kGHfJBcGlxExvXst8w8USmqxDsiUoxV7qMgkjIH/FUU=
self-ip = 172.16.0.2
self-ip-v6 = 2606:4700:cf1:1000::25
dns-server = 1.1.1.1
mtu = 1280
peer = (public-key = bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=, allowed-ips = "0.0.0.0/0, ::0/0", endpoint = 162.159.193.10:2408, keepalive = 25, client-id = 88/243/13)
